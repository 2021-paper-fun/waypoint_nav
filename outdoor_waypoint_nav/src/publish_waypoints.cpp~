#include <ros/ros.h>
#include <ros/package.h>
#include "std_msgs/MultiArrayLayout.h"
#include "std_msgs/MultiArrayDimension.h"
#include "std_msgs/Float32MultiArray.h"
#include <iostream>
#include <fstream>

int main(int argc, char **argv)
{
    //Initiate publish_waypoints node
    ros::init(argc, argv, "publish_waypoints");

    ros::NodeHandle n;

    ros::Publisher pub = n.advertise<std_msgs::Float32MultiArray>("waypoint_array", 100);

    int i=0;
    float num=0;

    while(ros::ok())
    {
	std_msgs::Float32MultiArray array;
	//Clear array
	array.data.clear();

	//for loop, pushing data in the size of the array

	/*	
	for (int i = 0; i < 90; i++)
	{
		//assign array a random number between 0 and 255.
		array.data.push_back(rand() % 255);
	}
	*/

	//Reading array from text file
	std::string path =  ros::package::getPath("outdoor_waypoint_nav");	
	
	std::ifstream File (path + "/src/points.txt");
	if (File.is_open())
	{

	  while(!File.eof())
	  {
	    File >> num;
	    std::cout << File;
	    //array.data.push_back(num);
	  }
	  File.close();
	}
	else std::cout << "Unable to open file";

	//Publish array
	//pub.publish(array);
    }

	ros::spin();
    return 0;
}
